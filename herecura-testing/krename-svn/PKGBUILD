# Contributor: BlackEagle <ike.devolder@herecura.be>

pkgname=krename-svn
pkgver=194
pkgrel=1
pkgdesc="KRename is a powerful batch file renamer for KDE4."
url="http://www.krename.net/"
arch=('i686' 'x86_64') 
license=('GPL')
depends=('kdelibs' 'taglib' 'xdg-utils' )
makedepends=('subversion' 'cmake' 'automoc4')
options=('libtool')
conflicts=('krename')
provides=('krename')
source=()
md5sums=()

_svnmod="krename"
_svntrunk=https://krename.svn.sourceforge.net/svnroot/krename/trunk/

build() {
  cd $srcdir
  if [ -d ${_svnmod}/.svn ]; then
    (cd $_svnmod && svn up -r $pkgver)
  else
    svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
  fi

  msg "SVN checkout done or server timeout"
  msg "Starting make..."

  if [ -d ${_svnmod}-build ]; then
    rm -r ${_svnmod}-build
  fi
  cp -a $_svnmod ${_svnmod}-build
  cd ${_svnmod}-build

  mkdir build
  cd build
  cmake -DCMAKE_INSTALL_PREFIX=/usr ..
  make || return 1
  make DESTDIR=$startdir/pkg/ install
}

