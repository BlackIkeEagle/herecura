# Archlinux buildscript for nntpgrab-svn

# Contributor: BlackEagle <ike.devolder@scarlet.be>
pkgname=nntpgrab-svn
pkgver=1696
pkgrel=1
pkgdesc="NNTPGrab is an open source usenet download program"
arch=('i686' 'x86_64')
url="http://www.nntpgrab.nl/"
license=('GPL2')
groups=()
depends=('gtk2' 'libxml2' 'libxslt' 'openssl' 'sqlite3' 'gtkhtml' 'libsoup' 'par2cmdline' 'intltool')
makedepends=('subversion' 'pkgconfig')
provides=('nntpgrab')
conflicts=('nntpgrab')
replaces=()
backup=()
options=()
install=
source=()
noextract=()
md5sums=() #generate with 'makepkg -g'

_svntrunk='http://svn.openftd.org/svn/nntpgrab/trunk'
_svnmod='nntpgrab'

build()
{
	cd "$srcdir"

	if [ -d $_svnmod/.svn ]; then
		(cd $_svnmod && svn up -r $pkgver)
	else
		svn co $_svntrunk --config-dir ./ -r $pkgver $_svnmod
	fi

	msg "SVN checkout done"
	msg "Starting make..."

	if [ -d $srcdir/$_svnmod-build ]; then
		rm -r $srcdir/$_svnmod-build
	fi
	cp -a $srcdir/$_svnmod $srcdir/$_svnmod-build
	cd "$srcdir/$_svnmod-build"

	./autogen.sh
	./configure --prefix=/usr --disable-webinterface
	make || return 1
	make DESTDIR=$startdir/pkg install
}
