# Maintainer: ruario 
# Contributor: BlackEagle
# Contributor: Skunnyk
# Contributor: totoloco
pkgname=opera-devel
_bigrelease=10.70
_buildver=9071
_randomizer=This-Is-Not-Yet-11.00-So-No-Extentions-Yet
pkgver=${_bigrelease}_${_buildver}
pkgrel=1
pkgdesc="A fast and secure web browser and Internet suite. Development/Snapshot version."
url="http://my.opera.com/desktopteam/blog/"
depends=('gcc-libs' 'libxt' 'freetype2' 'libxext')
makedepends=('libarchive')
provides=('opera')
optdepends=('gtk2: GTK integration'
	    'kdebase-runtime: KDE4 integration'
		'gstreamer0.10-base-plugins: HTML5 open codecs support'
		'gstreamer0.10-good: HTML5 open codecs support'
		'gstreamer0.10-ffmpeg: HTML5 not so open codecs support'
		'gstreamer0.10-bad-plugins: HTML5 not so open codecs support')
install=${pkgname}.install
options=(!strip !zipman)
license=('custom:opera')
arch=('i686' 'x86_64')
#source=(
#http://snapshot.opera.com/unix/${_randomizer}_${_bigrelease}-${_buildver}/opera-${_bigrelease}-${_buildver}.i386.linux.tar.xz
#http://snapshot.opera.com/unix/${_randomizer}_${_bigrelease}-${_buildver}/opera-${_bigrelease}-${_buildver}.x86_64.linux.tar.xz
#)
_arch=i386
[ "$CARCH" = "x86_64" ] && _arch=x86_64
source=(http://snapshot.opera.com/unix/${_randomizer}_${_bigrelease}-${_buildver}/opera-${_bigrelease}-${_buildver}.${_arch}.linux.tar.xz)
sha256sums=('7f6e2f5a47146798e6621a4c15e1bf4a50bdb910a072062a661800dbb637af4e')
[ "$CARCH" = "x86_64" ] && sha256sums=('cb1dc5f3aabf6a477c0546b96a3a14679e301884becc954f98cf83366c0d121d')

build() {
	opera-${_bigrelease}-${_buildver}.${_arch}.linux/install --suffix devel --prefix /usr --repackage ${pkgdir}/usr
	install -D -m 644 ${pkgdir}/usr/share/${pkgname}/defaults/license.txt ${pkgdir}/usr/share/licenses/${pkgname}/license.txt
}
