# Maintainer: BlackEagle < ike DOT devolder AT gmail DOT com >
# Contributer: Tom Billiet (mouse256@ulyssis.org)

pkgname=jalbum
pkgver=8.10
pkgrel=1
pkgdesc="free web photo album software and photo gallery software"
url="http://jalbum.net/"
license=('custom' 'lgpl')
depends=('java-runtime')
arch=('any')
source=("http://jalbum.net/download/Jalbum$pkgver.zip"
	"jalbum.sh"
	"jalbum.desktop")
sha256sums=('e021ab986ef07f5953e623f92c9f4817c53086f9f247466db8242c9d08408077'
            '98e7978b46e59460e9420ccd0a2d43b5ac189593881b77b945bff1484217eb24'
            '89c0eee9fe4ba8bea89f1c4c0a7943cc5dff8f4427cce67b9eda6f1a64dd930c')

build() {
	#remove batfiles and java sourcefiles
	cd Jalbum
	find \( -name "*.bat" -o -name "*.cmd" -o -name "*.java" \) -delete

	#remove lib/sunos/windows
	rm -rf lib/{sunos,windows}

	#remove startupscript, we install one in usr/bin
	rm -f startjalbum.sh

	#make sure no executable files are here
	chmod -R u=rwX,go=rX *
}

package() {
	install -dm755 ${pkgdir}/usr/share/java/
	cp -a Jalbum ${pkgdir}/usr/share/java/Jalbum
	install -dm755 ${pkgdir}/usr/share/pixmaps
	ln -s "/usr/share/java/Jalbum/icons/JalbumApp48.png" "${pkgdir}/usr/share/pixmaps/jalbum.png"
	install -Dm644 $srcdir/jalbum.desktop $pkgdir/usr/share/applications/$pkgname.desktop
	install -Dm755 $srcdir/jalbum.sh $pkgdir/usr/bin/jalbum
}
