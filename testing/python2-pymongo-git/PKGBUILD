# vim:set ft=sh:
# Contributor: Piotr Husiaty≈Ñski <phusiatynski@gmail.com>
# Contributor: lp76 <l.peduto@gmail.com>

pkgname=python2-pymongo-git
_gitname="mongo-python-driver"
pkgver=20130528.5197334
pkgrel=1
pkgdesc="Python driver for MongoDB"
arch=('i686' 'x86_64')
license=("APACHE")
url="http://pypi.python.org/pypi/pymongo/"
depends=('python2') 
provides=('python2-pymongo')
makedepends=('python2-distribute' 'git')
source=("$_gitname::git://github.com/mongodb/mongo-python-driver.git")
sha256sums=('SKIP')

pkgver() {
	cd "$srcdir/$_gitname"
	echo $(git log -1 --format="%ci" | sed 's/.*\([0-9]\{4\}\)-\([0-9]\{2\}\)-\([0-9]\{2\}\).*/\1\2\3/').$(git rev-parse --short HEAD)
}

build() {
	msg "creating build directory"
	cd ${srcdir}
	[ -d ${_gitname}-build ] && rm -rf ${_gitname}-build
	/usr/share/git/workdir/git-new-workdir ${_gitname} ${_gitname}-build master
}

package() {
	cd ${_gitname}-build
	python2 setup.py install --root=$pkgdir
}
