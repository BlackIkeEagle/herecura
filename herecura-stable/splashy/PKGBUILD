# Contributor: Lexiw <llexiw@gmail.com>
# Contributor: Angel 'angvp' Velasquez <angvp[at]archlinux.com.ve>
# Contributor: dongiovanni <dongiovanni@archlinux.de>
# Contributor: Darwin Bautista <djclue917@gmail.com>
# Contributor: Jeremy Sands <cto@jeremysands.com>
# Contributor: Tons of people here http://bbs.archlinux.org/viewtopic.php?id=48978

pkgname=splashy
pkgver=0.3.13
pkgrel=6
pkgdesc="A next-generation user-space boot splashing system for Linux systems without depending on initscripts-splashy"
arch=('i686' 'x86_64')
url="http://splashy.alioth.debian.org/"
license=('GPL')
depends=('file' 'glib2' 'directfb' 'initscripts')
options=('!libtool' '!distcc' '!makeflags')
provides=('splashy')
install=splashy.install
source=(https://alioth.debian.org/frs/download.php/2691/splashy-0.3.13.tar.gz
	splashy.initcpio_install
	splashy.initcpio_hook
	splashy.install
	splashy-functions
	splash-initscripts
	splash.conf)

build() {
	cd ${srcdir}/splashy-${pkgver}

	./configure --prefix=/usr --libdir=/usr/lib --sysconfdir=/etc --sbindir=/sbin --datarootdir=/usr/share --mandir=/usr/share/man --includedir=/usr/include
	make || return 1
	make DESTDIR=${pkgdir} install

	# Remove unnecessary files
	rm -rf ${pkgdir}/etc/{console-tools,default,init.d,lsb-base-logging.sh}
	rm -rf ${pkgdir}/usr/share/initramfs-tools

	install -D -m644 ${srcdir}/splashy.initcpio_install ${pkgdir}/lib/initcpio/install/splashy
	install -D -m644 ${srcdir}/splashy.initcpio_hook ${pkgdir}/lib/initcpio/hooks/splashy
	install -D -m644 ${srcdir}/splashy-functions ${pkgdir}/etc/rc.d/splashy-functions
	
	install -D -m644 ${srcdir}/splash-initscripts ${pkgdir}/etc/rc.d/functions.d/splash
	install -D -m644 ${srcdir}/splash.conf ${pkgdir}/etc/splash.conf

	sed -e 's|>/etc/splashy/themes<|>/usr/share/splashy/themes<|' -i ${pkgdir}/etc/splashy/config.xml
}

md5sums=('03b7ee4f31c56ee61463772f74bad8a0'
         '248b57da47f54b33859dd84fbf67719d'
         'f2d1b7ca4560a2888b08c5580dc8afae'
         'c22046f52421e0663e02375e399ef37a'
         '91972fc154635806923befe3a70a1299'
         'd3fffe7133e6096937195084d2746889'
         'fe6da7a9242aca91779e165979bb7e3d')
