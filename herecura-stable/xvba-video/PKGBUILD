#Maintainer: Jesse Jaara <gmail.com: jesse.jaara>

pkgname=xvba-video
pkgver=0.8.0
pkgrel=1
pkgdesc="AMDs XvBA backend for VA-API, hardware video acceleration on RadeonHD cards"
arch=('i686' 'x86_64')
url="http://www.splitted-desktop.com/~gbeauchesne/xvba-video/"
license=('GPL2')
#depends=('catalyst>=10.12' 'xvba-sdk' 'libva')
#depends=('catalyst>=10.12' 'libva')
depends=('catalyst-utils>=10.12' 'libva')
makedepends=('python2')
source=(
	"http://www.splitted-desktop.com/~gbeauchesne/xvba-video/xvba-video-${pkgver}.tar.gz"
	"xvba.sh"
)

md5sums=(
	'd9ddec2e7f02c1fa533773918e88e311'
	'092e3e805938edc8532cecc0b03140d1'
)

build() {
  cd "${srcdir}/xvba-video-${pkgver}"

  ./configure --disable-debug --prefix=/usr
  PYTHON=python2 make
}

package() {
  cd "${srcdir}/xvba-video-${pkgver}"

  make DESTDIR="${pkgdir}" install
  install -m755 -d "${pkgdir}/etc/profile.d"
  install -m755 "${srcdir}/xvba.sh" "${pkgdir}/etc/profile.d/"
  chmod +x "${pkgdir}/etc/profile.d/xvba.sh"
}
