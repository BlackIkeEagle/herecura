# Contributor: Mladen Pejakovic <pejakm@gmail.com>

pkgname=kcm-grub2
_pname=${pkgname//-}
pkgver=1.0
pkgdesc="This Kcm module manages the most common settings of Grub2."
pkgrel=1
arch=('i686' 'x86_64')
_kdeapps=137886
url="http://kde-apps.org/content/show.php?content=${_kdeapps}"
license=(GPL)
makedepends=('cmake' 'automoc4')
depends=('kdebindings-python')
options=()
source=(http://kde-apps.org/CONTENT/content-files/${_kdeapps}-${_pname}.tar.gz)
md5sums=('6ede60540b208bab9a22046ae6694085')

build(){	
  cd ${srcdir}/${_pname}
  # change python to python2 since kde depends on python2
  sed 's/python/python2/g' -i kcmgrub2.py
  cmake -DCMAKE_INSTALL_PREFIX=/usr \
    -DBUILD_PROBER=ON \
    -DCMAKE_BUILD_TYPE=Release
  make
}
package(){
  cd ${srcdir}/${_pname}
  make DESTDIR="${pkgdir}" install
}
